<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon - Solo's Strage Journey</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            color: #333;
            overflow-x: hidden;
            /* Prevent horizontal scroll */
        }

        #book {
            display: flex;
            max-width: 100vw;
            margin: 0 auto;
            padding: 0;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: relative;
            /* For positioning the toggle button */
        }

        #navigation {
            width: 250px;
            padding: 20px;
            border-right: 2px solid #3498db;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            background-color: #fff;
            height: calc(100vh - 40px - 50px);
            margin-top: 0px;
            overflow-y: auto;
            position: fixed;
            left: 0;
            top: 50px;
            transform: translateX(-100%);
            transition: transform 0.3s ease, top 0.3s ease;
        }

        #navigation.show {
            transform: translateX(0);
        }

        #navigation ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        #navigation li {
            list-style-type: none;
            margin: 10px 0;
        }

        #navigation a {
            text-decoration: none;
            color: #3498db;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        #navigation a:hover {
            background-color: #ecf0f1;
        }

        #content {
            flex: 1;
            padding: 40px;
            background-color: #fff;
            min-height: calc(100vh - 40px);
            overflow-y: auto;
            margin-left: 280px;
            /* Adjust based on the width of the navigation */
            transition: margin-left 0.3s ease;
        }

        #content.shift {
            margin-left: 0;
        }

        /* Hide the toggleNav button on mobile devices */
        @media (max-width: 768px) {
            #toggleNav {
                display: none;
            }

            #content {
                margin-left: 0;
                padding-top: 10px;
                padding-left: 10px;
                padding-right: 10px;
            }
        }

        .highlight {
            background-color: #bbdfff;
            /* Light blue background for highlighting */
            border-radius: 5px;
        }

        /* Styles for paragraphs inside the content area */
        #content p {
            margin: 1em 0;
            /* Adds space above and below paragraphs */
            line-height: 1.6;
            /* Increases line spacing for readability */
            font-size: 1.1em;
            /* Slightly larger font size for better readability */
            color: #333;
            /* Dark gray color for text */
            font-family: Arial, sans-serif;
            /* Sets a clean, sans-serif font */
            text-align: justify;
            /* Justifies text alignment for a cleaner look */
            padding: 0 10px;
            /* Adds padding inside the paragraph for better text placement */
        }

        #bookTitle {
            flex-grow: 1;
            text-align: center;
            margin-top: auto;
            margin-bottom: auto;
            color: #ebebeb;
        }

        #header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: calc(100vw - 20px);
            height: 50px;
            z-index: 1000;
            /* Ensure header is above other content */
            padding: 0px 10px;
            transition: transform 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            color: white;
            font-family: Arial, sans-serif;
        }

        /* When the header is hidden */
        .header-hidden #header-bar {
            transform: translateY(-100%);
            /* Moves header out of view */
        }

        .header-hidden #navigation {
            top: 0;
            /* Adjusts navigator to top */
            height: 100%;
            /* Expands navigator to full height */
        }

        .header-hidden #content {
            margin-top: 0;
            /* Moves content to the top */
        }

        #toggleNav {
            background: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            z-index: 10;
            /* Make sure it's above other content */
        }

        #toggleNav {
            border: none;
            color: white;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        #patreon-section {
            display: flex;
            align-items: center;
        }

        #patreon-login,
        #patreon-logout {
            background-color: #ff424d;
            border: none;
            color: white;
            padding: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        #patreon-username {
            margin-right: 10px;
            font-weight: bold;
            font-size: 16px;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('#navigation a').forEach(function (link) {
                link.addEventListener('click', function (event) {
                    const listItem = this.closest('li'); // Get the closest <li> element
                    // Clear previous highlights
                    document.querySelectorAll('#navigation li').forEach(function (li) {
                        li.classList.remove('highlight');
                    });
                    // Highlight the clicked <li>
                    listItem.classList.add('highlight');
                });
            });
        });
    </script>
    <script>
        function loadContent(url) {
            fetch(url)
                .then(response => response.text())
                .then(data => {
                    document.getElementById('content').innerHTML = data;
                })
                .catch(error => console.error('Error loading content:', error));
        }
    </script>
</head>

<body>
    <div id="header-bar">
        <button id="toggleNav">â˜°</button>
        <h1 id="bookTitle">Pokemon - Solo's Strange Journey</h1>
        <div id="patreon-section">
            <button id="patreon-login">Login with Patreon</button>
            <span id="patreon-username" style="display: none;"></span>
            <button id="patreon-logout" style="display: none;">Logout</button>
        </div>
    </div>
    <div id="book">
        <ul id="navigation" class="show">
            <!-- Links to HTML files will be inserted here -->
        <li>V1 - My first pokemon<ul>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\01_I choose you.html'); return false;">01 I choose you</a></li>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\02_Watch out world, here I come!.html'); return false;">02 Watch out world, here I come!</a></li>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\03_Lake Verity.html'); return false;">03 Lake Verity</a></li>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\04_I choose you!.html'); return false;">04 I choose you!</a></li>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\05_The long road home.html'); return false;">05 The long road home</a></li>
            <li><a href="#" onclick="loadContent('V1 - My first pokemon\\06_The Return of the Champion.html'); return false;">06 The Return of the Champion</a></li>
        </ul></li>
        <li>V2 - Trainer School<ul>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\01_Let\'s go to trainer school.html'); return false;">01 Let's go to trainer school</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\02_City of Jubilation.html'); return false;">02 City of Jubilation</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\03_Meeting the Roommates.html'); return false;">03 Meeting the Roommates</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\04_Taking classes.html'); return false;">04 Taking classes</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\05_Shopping tour.html'); return false;">05 Shopping tour</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\06_Battle class.html'); return false;">06 Battle class</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\07_Bewilder Forest.html'); return false;">07 Bewilder Forest</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\08_Different Strokes for Different Blokes!.html'); return false;">08 Different Strokes for Different Blokes!</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\09_Dawn we go.html'); return false;">09 Dawn we go</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\10_The wandering minstrel.html'); return false;">10 The wandering minstrel</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\11_Obligatory Tournament Arc.html'); return false;">11 Obligatory Tournament Arc</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\12_Criminals.html'); return false;">12 Criminals</a></li>
            <li><a href="#" onclick="loadContent('V2 - Trainer School\\13_Date.html'); return false;">13 Date</a></li>
        </ul></li>
        <li>V3 - The Mystery of Mesprit<ul>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\01_Fantastic Ferry, Frightful Fiasco.html'); return false;">01 Fantastic Ferry, Frightful Fiasco</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\02_Whispers in the Dark.html'); return false;">02 Whispers in the Dark</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\03_Stuck in the Past.html'); return false;">03 Stuck in the Past</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\04_Stuck in the Present.html'); return false;">04 Stuck in the Present</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\05_The Aura with You.html'); return false;">05 The Aura with You</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\06_End of an Era.html'); return false;">06 End of an Era</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\07_The Aura with Me.html'); return false;">07 The Aura with Me</a></li>
            <li><a href="#" onclick="loadContent('V3 - The Mystery of Mesprit\\08_Life goes on.html'); return false;">08 Life goes on</a></li>
        </ul></li>
        <li>V4 - A new Star is Born<ul>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\01_New Day in a cruel World.html'); return false;">01 New Day in a cruel World</a></li>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\02_Canalave City.html'); return false;">02 Canalave City</a></li>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\03_Love is in the Air.html'); return false;">03 Love is in the Air</a></li>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\04_Meeting Heroes.html'); return false;">04 Meeting Heroes</a></li>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\05_Mine Badge is Mine.html'); return false;">05 Mine Badge is Mine</a></li>
            <li><a href="#" onclick="loadContent('V4 - A new Star is Born\\06_Goodbye Canalave City.html'); return false;">06 Goodbye Canalave City</a></li>
        </ul></li>
        <li>V5 - Soaring Hearts<ul>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\01_M.S. Anne.html'); return false;">01 M.S. Anne</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\02_MiSsANNE Impossible.html'); return false;">02 MiSsANNE Impossible</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\03_Contest Time in Chocovine.html'); return false;">03 Contest Time in Chocovine</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\04_Chocovine and Dine.html'); return false;">04 Chocovine and Dine</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\05_A Life Reborn.html'); return false;">05 A Life Reborn</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\06_Floaroma Flower Fields.html'); return false;">06 Floaroma Flower Fields</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\07_Poffins and Promises.html'); return false;">07 Poffins and Promises</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\08_Dual Performance.html'); return false;">08 Dual Performance</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\09_Danger looms over Alamos Town.html'); return false;">09 Danger looms over Alamos Town</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\10_Darkrai, Ruler of Darkness Pt1.html'); return false;">10 Darkrai, Ruler of Darkness Pt1</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\11_Darkrai, Ruler of Darkness Pt2.html'); return false;">11 Darkrai, Ruler of Darkness Pt2</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\12_Gods.html'); return false;">12 Gods</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\13_Fulfilling the Prophecy.html'); return false;">13 Fulfilling the Prophecy</a></li>
            <li><a href="#" onclick="loadContent('V5 - Soaring Hearts\\14_We Saved the Town.html'); return false;">14 We Saved the Town</a></li>
        </ul></li>
        <li>V6 - Oreburgh City<ul>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\01_Oreburgh City.html'); return false;">01 Oreburgh City</a></li>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\02_Man\'s many Facets.html'); return false;">02 Man's many Facets</a></li>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\03_Daily Life of a Pokemon.html'); return false;">03 Daily Life of a Pokemon</a></li>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\04_Battle for Glory.html'); return false;">04 Battle for Glory</a></li>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\05_Post-Match Celebrations.html'); return false;">05 Post-Match Celebrations</a></li>
            <li><a href="#" onclick="loadContent('V6 - Oreburgh City\\06_Mine all Day.html'); return false;">06 Mine all Day</a></li>
        </ul></li>
        <!-- End of links section -->
        </ul>
        <div id="content" class="">
            <p>Select a chapter.</p>

            <!--<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in libero. </p>
            -->
        </div>
    </div>
    <script>
        // Function to handle swipe gestures
        let startX;

        document.addEventListener('touchstart', function (e) {
            startX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', function (e) {
            let endX = e.changedTouches[0].clientX;
            const nav = document.getElementById('navigation');
            const content = document.getElementById('content');
            if (startX - endX > 50) {
                // Swipe left
                nav.classList.remove('show');
                content.classList.add('shift');
            } else if (endX - startX > 50) {
                // Swipe right
                nav.classList.add('show');
                content.classList.remove('shift');
            }
        });

        // Toggle navigation visibility
        document.getElementById('toggleNav').addEventListener('click', function () {
            const nav = document.getElementById('navigation');
            const content = document.getElementById('content');
            if (nav.classList.contains('show')) {
                nav.classList.remove('show');
                content.classList.add('shift');
            } else {
                nav.classList.add('show');
                content.classList.remove('shift');
            }
        });

        let startY;
        let isHeaderHidden = document.body.classList.contains('header-hidden');
        const header = document.querySelector('header-bar');
        const navigation = document.getElementById('navigation');
        const content = document.getElementById('content');

        // Function to show header
        function showHeader() {
            document.body.classList.remove('header-hidden');
            isHeaderHidden = false;
        }

        // Function to hide header
        function hideHeader() {
            document.body.classList.add('header-hidden');
            isHeaderHidden = true;
        }

        // Detect swipe up or down gestures
        window.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        });

        window.addEventListener('touchmove', (e) => {
            let moveY = e.touches[0].clientY;
            let diffY = startY - moveY;

            if (diffY > 50 && !isHeaderHidden) {
                // Swipe up: Hide header
                hideHeader();
            } else if (diffY < -50 && isHeaderHidden) {
                // Swipe down: Show header
                showHeader();
            }
        });

        let lastScrollTop = 0;

        // Function to show header
        function showHeader() {
            if (isHeaderHidden) {
                document.body.classList.remove('header-hidden');
                isHeaderHidden = false;
            }
        }

        // Function to hide header
        function hideHeader() {
            if (!isHeaderHidden) {
                document.body.classList.add('header-hidden');
                isHeaderHidden = true;
            }
        }

        // Detect scroll events
        window.addEventListener('scroll', () => {
            let currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScrollTop > lastScrollTop && !isHeaderHidden) {
                // Scrolling down: Hide header
                hideHeader();
            } else if (currentScrollTop < lastScrollTop && isHeaderHidden) {
                // Scrolling up: Show header
                showHeader();
            }

            lastScrollTop = currentScrollTop <= 0 ? 0 : currentScrollTop; // For Mobile Safari
        });


    </script>

    <script>
        const CLIENT_ID = 'DCmpYjAt5oF-1poN2N_hW22VXTuz8BNIOPk1yeoctffuvobAJCu8I7N7fKc1ngMp';
        const REDIRECT_URI = "https://benis-boy.github.io/SSJ/";  // Adjust as needed
        const PATREON_OAUTH_URL = `https://www.patreon.com/oauth2/authorize?response_type=code&client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}`;
        const patreonLoginButton = document.getElementById('patreon-login');
        const patreonLogoutButton = document.getElementById('patreon-logout');
        const patreonUsernameSpan = document.getElementById('patreon-username');

        // Check if user is logged in via Patreon
        function checkPatreonAuthentication() {
            const username = localStorage.getItem('patreon_username');
            if (username) {
                showPatreonUser(username);
            } else {
                patreonLoginButton.style.display = 'block';
                patreonLogoutButton.style.display = 'none';
                patreonUsernameSpan.style.display = 'none';
            }
        }

        function showPatreonUser(username) {
            patreonLoginButton.style.display = 'none';
            patreonLogoutButton.style.display = 'block';
            patreonUsernameSpan.textContent = `Logged in as ${username}`;
            patreonUsernameSpan.style.display = 'block';
        }

        patreonLoginButton.addEventListener('click', function () {
            window.location.href = PATREON_OAUTH_URL;
        });

        patreonLogoutButton.addEventListener('click', function () {
            localStorage.removeItem('patreon_username');
            // Clear the search parameters in the URL
            const url = new URL(window.location);
            url.search = ''; // Remove the search parameters
            window.history.replaceState({}, document.title, url);
            checkPatreonAuthentication(); // Recheck and update UI
        });

        // Simulate getting the username from the OAuth process (this should be handled server-side)
        async function handlePatreonAuth(authCode) {
            // Simulate retrieving username from the OAuth process
            const tokenEndpoint = 'https://www.patreon.com/api/oauth2/token?';
            const params = new URLSearchParams({
                code: authCode,
                grant_type: 'authorization_code',
                client_id: CLIENT_ID,
                redirect_uri: REDIRECT_URI
            });

            try {
                const response = await fetch(tokenEndpoint + params.toString(), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        "Access-Control-Allow-Origin": "*"
                    }
                });

                if (response.ok) {
                    const tokenData = await response.json();
                    console.log(tokenData); // This contains the access_token and other info

                    // Now you would use the access_token to make a request for user info
                    const userData = await fetchPatreonUser(tokenData.access_token);

                    // Save the username in localStorage
                    const username = userData.data.attributes.full_name;
                    localStorage.setItem('patreon_username', username);

                    // Display the Patreon username
                    showPatreonUser(username);
                } else {
                    console.error('Failed to fetch token:', response.statusText);
                }
            } catch (error) {
                console.error('Error during Patreon OAuth:', error);
            }
        }

        // Check if there is an auth code in the URL (for OAuth)
        const urlParams = new URLSearchParams(window.location.search);
        const authCode = urlParams.get('code');
        if (authCode) {
            handlePatreonAuth(authCode);
        }

        // Check Patreon authentication status on page load
        checkPatreonAuthentication();
    </script>
</body>

</html>